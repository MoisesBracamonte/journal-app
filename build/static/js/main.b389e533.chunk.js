(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),u=(a(66),a(15)),i=a(18),l=a(6),s=a(21),m=a.n(s);a(67),a(70),a(155);m.a.initializeApp({apiKey:"AIzaSyDJRlYs1TdXeKVeUKGEou31R3CHUgo2IeU",authDomain:"react-curso-d3622.firebaseapp.com",databaseURL:"https://react-curso-d3622.firebaseio.com",projectId:"react-curso-d3622",storageBucket:"react-curso-d3622.appspot.com",messagingSenderId:"1024813913886",appId:"1:1024813913886:web:593feee160ca2d19d21b0f"});var d=m.a.firestore(),p=m.a.storage(),f=new m.a.auth.GoogleAuthProvider,E=a(5),h=a(7),b=a.n(h),O=a(13),g=a(16),v=a.n(g),_=a(31),j=a(3),N=function(){var e=Object(O.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,d.collection("".concat(t,"/journal/notes/")).get();case 3:return e.sent.forEach((function(e){a.push(Object(j.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t){return{type:"NOTE_ACTIVE",payload:Object(j.a)({id:e},t)}},y=function(e){return{type:"NOTE_LOAD",payload:e}},R=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:n=t.sent,a(y(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(a,n){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.uid,e.url||delete e.url,delete(c=Object(j.a)({},e)).id,t.next=6,d.doc("".concat(r,"/journal/notes/").concat(e.id)).update(c);case 6:a(x(e)),v.a.fire("Saved",e.title,"success");case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},x=function(e){return{type:"NOTE_UPDATE",payload:{note:e}}},C=function(e){return{type:"NOTE_DELETE",payload:{notes:e}}},L=function(e){var t=e.uid,a=e.email,n=e.displayName;return{type:_.LOGIN,payload:{uid:t,email:a,displayName:n}}},k=a(17),I={loginEmailPassword:function(e){var t=e.email,a=e.password;return function(e){m.a.auth().signInWithEmailAndPassword(t,a).then((function(t){var a=t.user;e(L(a))})).catch((function(e){v.a.fire("Error",e.message,"error")}))}},startGoogleLogin:function(){return function(e){m.a.auth().signInWithPopup(f).then((function(t){var a=t.user;e(L(a))})).catch((function(e){v.a.fire("Error",e.message,"error")}))}}},S=Object(E.b)(null,I)((function(e){var t=Object(n.useState)({email:"moisesrob@gmail.com",password:"123456"}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=function(e){var t=e.target,a=t.name,n=t.value;o(Object(j.a)(Object(j.a)({},c),{},Object(k.a)({},a,n)))},s=c.email,m=c.password;return r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.loginEmailPassword(c)}},r.a.createElement("input",{type:"text",name:"email",placeholder:"email",className:"auth__input",autoComplete:"off",value:s,onChange:function(e){return l(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",className:"auth__input",value:m,onChange:function(e){return l(e)}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Login"),r.a.createElement("div",{className:"auth__login-social-network",onClick:function(){e.startGoogleLogin()}},r.a.createElement("p",null,"Login with social network"),r.a.createElement("div",{className:"google-btn"},r.a.createElement("div",{className:"google-icon-wrapper"},r.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})),r.a.createElement("p",{className:"btn-text"},r.a.createElement("b",null,"Sign in with google"))))),r.a.createElement(i.b,{to:"/auth/register"},"Register"))})),U=a(58),A=a.n(U),G=a(32),D=function(e){return{type:G.UI_ERROR,payload:{loading:!0,msg:e}}},P={name:"Moises RB.",email:"moisesrob@gmail.com",password:"1234567",password2:"1234567"},z=function(){var e=Object(E.c)(),t=Object(E.d)((function(e){return e.ui})),a=Object(n.useState)(P),c=Object(u.a)(a,2),o=c[0],i=c[1],l=o.name,s=o.email,d=o.password,p=o.password2,f=function(e){i(Object(j.a)(Object(j.a)({},o),{},Object(k.a)({},e.target.name,e.target.value)))},h=function(){return 0===l.trim().length?(e(D("name is required")),!1):A.a.isEmail(s)?d!==p||d.length<5?(e(D("Password should be at least 6 characters and match each other")),!1):(e({type:G.UI_SET_ERROR}),!0):(e(D("email is required")),!1)};return r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"auth__title"},"Register"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),h()&&e(function(e){var t=e.email,a=e.password,n=e.name;return function(e){m.a.auth().createUserWithEmailAndPassword(t,a).then(function(){var t=Object(O.a)(b.a.mark((function t(a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.user,t.next=3,r.updateProfile({displayName:n});case 3:e(L(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){v.a.fire("Error",e.message,"error")}))}}(o))}},t.loading&&r.a.createElement("div",{className:"auth__alert-error"}," ",t.msg," "),r.a.createElement("input",{type:"text",name:"name",placeholder:"Name",className:"auth__input",autoComplete:"off",value:l,onChange:function(e){return f(e)}}),r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",className:"auth__input",autoComplete:"off",value:s,onChange:function(e){return f(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Paswword",className:"auth__input",value:d,onChange:function(e){return f(e)}}),r.a.createElement("input",{type:"password",name:"password2",placeholder:"Confirm",className:"auth__input",value:p,onChange:function(e){return f(e)}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block mb-5 mt-5"},"Login")))},B=function(){return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/auth/login",component:S}),r.a.createElement(l.b,{path:"/auth/register",component:z}),r.a.createElement(l.a,{exact:!0,to:"/auth/login"}))))},F=a(33),V=function(e){var t=e.isAuthenticated,a=e.component,n=Object(F.a)(e,["isAuthenticated","component"]);return r.a.createElement(l.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(a,e):r.a.createElement(l.a,{to:"/auth/login"})}}))},W=function(e){var t=e.isAuthenticated,a=e.component,n=Object(F.a)(e,["isAuthenticated","component"]);return r.a.createElement(l.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(l.a,{to:"/"}):r.a.createElement(a,e)}}))},J=a(59),K=a.n(J),M=function(e){var t=e.id,a=e.title,n=e.note,c=e.date,o=e.url,u=Object(E.c)(),i=K()(c);return r.a.createElement("div",{className:"journal__entry pointer",onClick:function(){u(w(t,{title:a,note:n,date:c,url:o}))}},o&&r.a.createElement("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url( ".concat(o," )")}}),r.a.createElement("div",{className:"journal__entry-body"},r.a.createElement("p",{className:"journal__entry-title"}," ",a," "),r.a.createElement("p",{className:"journal__entry-content"},n)),r.a.createElement("div",{className:"journal__entry-date-box"},r.a.createElement("span",null,i.format("dddd")),r.a.createElement("h4",null,i.format("\tDo"))))},X=function(){var e=Object(E.d)((function(e){return e.notes}));return r.a.createElement("div",{className:"journal__entries"},e.notes.map((function(e){return r.a.createElement(M,Object.assign({key:e.id},e))})))},q=function(){var e=Object(E.c)(),t=Object(E.d)((function(e){return e.auth}));return r.a.createElement("aside",{className:"journal__sidebar"},r.a.createElement("div",{className:"journal__sidebar-navbar"},r.a.createElement("h3",{className:"mt-5"},r.a.createElement("span",null,t.displayName)),r.a.createElement("button",{className:"mt-5 btn journal__btn-logout",onClick:function(){e(function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().signOut();case 2:t({type:"NOTE_LOGOUT_CLEANING"}),t({type:_.LOGOUT});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Logout")),r.a.createElement("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(O.a)(b.a.mark((function e(t,a){var n,r,c,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),r=n.auth,c=r.uid,o={title:"",note:"",date:(new Date).getTime()},e.next=5,d.collection("".concat(c,"/journal/notes/")).add(o);case 5:u=e.sent,t(w(u.id,o)),t(R(c));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}},r.a.createElement("i",{className:"far fa-calendar-plus fa-5x"}),r.a.createElement("p",{className:"mt-5"},"New entry")),r.a.createElement(X,null))},H=function(){return r.a.createElement("div",{className:"nothing__main-content"},r.a.createElement("p",null,"Select something"),"Please create a entry!",r.a.createElement("i",{className:"far fa-star fa-4x mt-5"}))},Y=function(){var e=Object(E.c)(),t=Object(E.d)((function(e){return e.notes})).active,a=function(a){var n,r=function(e){return p.ref("images/".concat(e.name)).put(e)}(function(e,t){var a=e.name.split(".");a="".concat(t,".").concat(a[a.length-1]);var n=e.slice(0,e.size,"image/png");return new File([n],a,{type:"image/png"})}(a.target.files[0],t.id));e((n=r,function(e,t){n.on("state_changed",(function(e){v.a.fire({title:"Uploading",text:"Please wait...",allowOutsideClick:!1,onBeforeOpen:function(){v.a.showLoading()}})}),(function(e){}),(function(){n.snapshot.ref.getDownloadURL().then((function(a){var n=t().notes.active;n.url=a,e(T(n)),v.a.close()}))}))}))};return r.a.createElement("div",{className:"notes__appbar"},r.a.createElement("span",null," 31 de julio 1992"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"file-upload"}," Picture "),r.a.createElement("input",{type:"file",id:"file-upload",hidden:!0,onChange:function(e){return a(e)}}),r.a.createElement("button",{className:"btn",onClick:function(){e(T(t))}}," Save ")))},Q=function(){var e=Object(E.c)(),t=Object(E.d)((function(e){return e.notes})).active,a=Object(n.useState)(t),c=Object(u.a)(a,2),o=c[0],i=c[1],l=Object(n.useRef)(t.id),s=o.title,m=o.note;o.url;Object(n.useEffect)((function(){t.id!==l.current&&(i(t),l.current=t.id)}),[t]);var p=function(e){i(Object(j.a)(Object(j.a)({},o),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){e(w(t.id,Object(j.a)({},o)))}),[o,e]),r.a.createElement("div",{className:"notes__main-content"},r.a.createElement(Y,null),r.a.createElement("div",{className:"notes__content"},r.a.createElement("input",{type:"text",name:"title",placeholder:"Some awesome title",className:"notes__title-input",autoComplete:"off",value:s,onChange:function(e){return p(e)}}),r.a.createElement("textarea",{name:"note",placeholder:"What happend today",className:"notes__textarea-input",value:m,onChange:function(e){return p(e)}}),r.a.createElement("div",{className:"notes__footer"},r.a.createElement("div",{className:"notes__images"},t.url&&r.a.createElement("img",{width:"20%",heigth:"20%",src:t.url,alt:"img"})),r.a.createElement("div",{className:"notes__button-del"},r.a.createElement("a",{onClick:function(){var t;console.log("Click delete"),e((t=l.current,function(){var e=Object(O.a)(b.a.mark((function e(a,n){var r,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().auth.uid,c=n().notes.notes,o=c.filter((function(e){return e.id!==t})),e.next=5,d.doc("".concat(r,"/journal/notes/").concat(t)).delete();case 5:a(C(o));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))))))},Z=function(){var e=Object(E.d)((function(e){return e.notes}));return r.a.createElement("div",{className:"journal__main-content"},r.a.createElement(q,null),r.a.createElement("main",null,e.active?r.a.createElement(Q,null):r.a.createElement(H,null)))},$=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(u.a)(o,2),d=s[0],p=s[1],f=Object(E.c)();return Object(n.useEffect)((function(){m.a.auth().onAuthStateChanged((function(e){(null===e||void 0===e?void 0:e.uid)?(f(L(e)),p(!0),f(R(e.uid))):p(!1),c(!1)}))}),[f,c]),a?r.a.createElement("h2",null,"Loading page..."):r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(W,{path:"/auth",isAuthenticated:d,component:B}),r.a.createElement(V,{exact:!0,path:"/",isAuthenticated:d,component:Z}),r.a.createElement(l.a,{to:"/auth/login"})))},ee=a(19),te=a(60),ae=a(31),ne=ae.LOGIN,re=ae.LOGOUT,ce=a(32),oe=ce.UI_ERROR,ue=ce.UI_SET_ERROR,ie={loading:!1,msg:""},le=a(42),se={notes:[],active:null},me="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d,de=Object(ee.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case ne:return Object(j.a)(Object(j.a)({},e),n);case re:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case oe:return Object(j.a)({},n);case ue:return ie;default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"NOTE_ACTIVE":return Object(j.a)(Object(j.a)({},e),{},{active:Object(j.a)({},n)});case"NOTE_LOAD":return Object(j.a)(Object(j.a)({},e),{},{notes:Object(le.a)(n)});case"NOTE_UPDATE":return Object(j.a)(Object(j.a)({},e),{},{notes:e.notes.map((function(e){return e.id===n.note.id?n.note:e}))});case"NOTE_DELETE":return Object(j.a)(Object(j.a)({},e),{},{active:null,notes:Object(le.a)(n.notes)});case"NOTE_LOGOUT_CLEANING":return Object(j.a)({},se);default:return e}}}),pe=Object(ee.e)(de,me(Object(ee.a)(te.a))),fe=function(){return r.a.createElement(E.a,{store:pe},r.a.createElement($,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(fe,null)),document.getElementById("root"))},31:function(e,t,a){"use strict";a.r(t),a.d(t,"LOGIN",(function(){return n})),a.d(t,"LOGOUT",(function(){return r}));var n="LOGIN",r="LOGOUT"},32:function(e,t,a){"use strict";a.r(t),a.d(t,"UI_ERROR",(function(){return n})),a.d(t,"UI_SET_ERROR",(function(){return r}));var n="UI_ERROR",r="UI_SET_ERROR"},61:function(e,t,a){e.exports=a(154)},66:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.b389e533.chunk.js.map